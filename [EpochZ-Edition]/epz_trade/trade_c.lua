
inventoryItems = {


["Торговец: оружие"] = {
{"Пистолеты"},
{"Дробовики"},
{"Штурмовые винтовки"},
{"Пулеметы"},
{"Снайперские винтовки"},
{"Оружие ближнего боя"},
{"Armas Especiais"},
},

["Торговец: патроны"] = {
{"Патроны для пистолетов"},
{"Патроны для дробовиков"},
{"Патроны для ружей"},
{"Патроны для штурмовых винтовOK"},
{"Патроны для пулеметов"},
{"Патроны для снайперских винтовOK"},
},

["Торговец: транспорт"] = {
{"Грузовой транспорт"},
{"Легковой транспорт"},
{"Воздушный транспорт"},
{"Мото транспорт"},
{"Другой транспорт"},
},
["Торговец: разное"] = {
{"Caixa de Ferramentas"},
{"Items"},
},
["Торговец: одежда"] = {
{"Рюкзаки"},
{"Одежда"},
},
["Торговец: Comidas & Bebidas & Mel"] = {
{"Comida"},
{"Вода"},
{"Médicoаменты"},
},

["Торговец: черный рынOK"] = {


{"Пулеметы(черный рынOK)"},
{"Снайперские винтовки(черный рынOK)"},

{"Items(черный рынOK)"},
{"Одежда(черный рынOK)"},
},

["Items(черный рынOK)"] = {
{"Saco de Peças de Zumbi",11000},
},

["Одежда(черный рынOK)"] = {
{"Capacete Militar 50%",10000},
{"Capacete Blindado 70%",12000},
{"Capacete Blindado 80%",17000},
{"Colete 20%",25000},
{"Colete 30%",35000},

},


["Грузовой транспорт"]={
{ "AM General М-939A2",65000,433 },
--{ "МАЗ 103",81415,431 },
{ "БРДМ 2",100000,601 },
{ "Kenworth W 900L",70000,403 },
--{ "Burrito",80123,482 },
--{ "Journey",70851,508},
--{ "Chevrolet S-10 Kemper",60711,499 },
--{ "Ford E-350",92588,414 },
{ "Frontline",50000,428 },
},

["Воздушный транспорт"]={
{ "UH-60 Black Hawk",60000,417 },
{ "Helicóptero turístico",70000,488 },
{ "Police Maverick",84000,497 },
{ "Robinson R44 Clipper",80000,447 },
{ "MH-X Silenthawk",65000,563 },
--{ "Ми-8Т",301485,548 },
{ "Robinson R44 Raven II NC",75000,487 },
{ "MBB Bo-105",67000,469 },
},
["Мото транспорт"]={
{ "Zombie chopper",35000,463 },
{ "Bati MIX",50000,461 },
{ "Kawasaki 150 SE",25000,468 },
{ "ATV 50",25000,471 },
},
["Другой транспорт"]={
{ "BMX",7000,481 },
{ "Bike",7000,509 },
{ "Mountain Bike",7000,510 },
},


["Легковой транспорт"] = {
{ "Chevrolet Suburban FBI",75000,490 },
{ "Lada Niva 4x4",30000,422 },
{ "Hummer H1",65000,470 },
{ "Dodge Challenger 1971",100000,542 },
{ "Ford Mustang Sandroadster",80000,424 },
{ "Oshkosh Sand Cat GNB",78000,528 },
{ "Chevrolet Camaro IROC-Z 1990",89000,402 },
--{ "Shamal",519,900000 },
{ "Vapid Bullet",180000,541 },
{ "Chevrolet Camaro SS 1968",160000,602 },
{ "Phoenix",99000,603 },
--{ "Reefer",453,200000 },
{ "Mitsubishi Lancer Evolution IX",100000,516 },
--{ "Combustível",584,600000 },
--{ "Прицеп",591,650000 },
{"Ford Mustang 1967",100000,434},
{ "Honda Civic Si 2012",90000,504 },
{ "Ambulance",60000,416 },
{ "Pontiac Firebird Trans Am 1980",170000,536 },
{ "Jeep Wrangler 1986",70000,500 },
{ "Annis Elegy Police",90000,596 },
{ "Nissan GTR R35",200000,411},
{ "Mitsubishi Lancer Evolution",130000,560},
},




["Пулеметы(черный рынOK)"] = {
{"Mk 48 Mod 0",10000},
},
["Снайперские винтовки(черный рынOK)"] = {
{"AS50",193000},
{"KSVK",192000},
{"M107",191000},

},


["Барыга"] = {
{"Пулеметы(барыга)"},
{"Снайперские винтовки(барыга)"},

{"Одежда(барыга)"},
},
["Пулеметы(барыга)"] = {
{"Mk 48 Mod 0",15000},
},
["Снайперские винтовки(барыга)"] = {
{"AS50",230000},
{"KSVK",240000},
{"M107",220000},


},
["Одежда(барыга)"] = {
{"Capacete Militar 50%",17000},
{"Capacete Blindado 70%",20000},
{"Capacete Blindado 80%",25000},
{"Colete 20%",30000},
{"Colete 30%",45000},
},

["Пистолеты"] = {
{"G17",1000},
{"M1911",1500},
{"M9",2000},
{"M9 SD",2400},
{"Makarov PM",900},
{"Revolver",2700},
},
["Дробовики"] = {
{"M1014",5000},
{"Remington 870",4000},
--{"Remington 870 (Com Lanterna)",4213},
{"Saiga 12K",6500},
},

["Штурмовые винтовки"] = {
{"AK-107",7000},
--{"AK-107 PSO",7062},
{"AK-74",5700},
{"AKM",6100},
--{"AKS",6021},
{"AKS (gold)",7500},
--{"AKS-74 Kobra",6835},
--{"AKS-74 PSO",7101},
{"AKS-74U",5700},
{"G36",6400},
{"G36C-SD",6600},
--{"G36K",6474},
{"M4A1",15000},
{"M4A1 SD",18000}, 
{"FN SCAR",23000}, 

{"MP5",4000},
},
["Пулеметы"] = {
{"M240",9500},
{"M249 Saw",9600},
{"MG36",9900},
{"PKM",9000},
--{"PKP",9835},
},
["Снайперские винтовки"] = {
{"CZ550",6300},
{"ВСС Vintorez",21000},
{"DMR",24000},
{"M24",23000},
--{"M24 (desert)",17342},
{"M40A3",23500},
{"SVD Camo",23500},
},


["Оружие ближнего боя"] = {
{"Machado",2000},
{"Taco de beisebol",300},
{"Machete",1500},
{"Motosserra",5000},
{"Pé-de-Cabra",900},
},

["Armas Especiais"] = {
{"Pára-Quedas",5000},
{"Gás Lacrimogêneo",2421},
--{"Granada",3765},
{"Binóculos",500},
},

["Патроны для пистолетов"] = {
{"G17 mag",700,10},
{"M1911 mag",600,10},
{"M9 mag",800,10},
{"Makarov mag",500,10},
{".45 ACP",600,6},
},
["Патроны для дробовиков"] = {
{"M1014 Pellet",550,8},
{"Saiga mag",650,8},
},
["Патроны для ружей"] = {
--{"Lee mag",1524,10},
},
["Патроны для штурмовых винтовOK"] = {
{"AK mag",1100,30},
--{"MP5 mag",1001,25},
{"AKM mag",1400,30},
{"FN mag",2200,30},
{"G36 mag",1200,30},
{"M4A1 mag",2000,30},
},
["Патроны для пулеметов"] = {
{"M240 Belt",3000,100},
{"M249 Belt",3100,100},
{"MG36 mag",3500,100},
{"PKM mag",2900,100},
},
["Патроны для снайперских винтовOK"] = {
{"AS50 mag",2500,5}, 
{"CZ550 mag",550,5},
{"ВСС mag",2050,30},
{"DMR mag",700,5},
{"KSVK mag",2600,5},
{"M107 mag",2400,5},
{"M24 mag",650,5},
{"M40A3 mag",700,5},
{"SVD mag",650,5},
},






["Comida"] = {

{"Lata de Macarrão",700},
{"Lata de Feijão",800},
{"Peixe Frito",7000},
--{"Pizza",1524},
{"Ração Seca Grande",5000},
{"Ração Seca Pequena",4000},

},
["Вода"] = {
{"Garrafa de Água Vazia",1000}, 
{"Garrafa de Água Com Gás Completo",500},
{"Coca-Cola",650},
},
["Médicoаменты"] = {

{"Bolsa de Sangue",3500},
{"Antibiótico",600},
{"Morfina",1000},
{"Analgésico",500},
{"Kit de Primeiros Socorros",3000},
{"Ataduras",100}, 

},
["Items"] = {
{"Sinal de Fogo",350},
{"Galão de Combútivel Vazio",700},
--{"Arame Farpado",184},
--{"Sacos de Areia",30000},
{"Pneu",2200},
{"Motor",3300},
{"Lenha",150},
{"Vara de Pesca",20000},
{"Снасти",2000},
{"Наживка",1000},
{"Mangueira",300},
{"Walkie-Talkie",10},
{"Lenha",200},
{"Tenda",3000},
{"Placa de Metal 1",10000},
{"Placa de Metal 2",12000},
{"Chapa de Aço",5000},
},
["Одежда"] ={

{"Vestuário: Militar 1",5000},
{"Vestuário: Militar 2",5300},
{"Vestuário: Militar 3",5600},
{"Vestuário: Militar 4",5100},
{"Vestuário: Militar 5",5200},
{"Vestuário: Militar 6",5050},
{"Vestuário: Militar 7",5010},
{"Vestuário: Militar 8",5000},
{"Vestuário: Sobrevivente 1",3500},
{"Vestuário: Sobrevivente 2",3500},
{"Vestuário: Sobrevivente 3",3200},
{"Vestuário: Sobrevivente 4",3100},
{"Vestuário: Sobrevivente 5",3200},
{"Vestuário: Sobrevivente 6",3010},
{"Vestuário: Sobrevivente 7",3050},
{"Vestuário: Atirador 1",7200},
{"Vestuário: Atirador 2",7600},
{"Vestuário: Atirador 3",7100},
{"Vestuário: Atirador 4",7200},

{"Capacete de Motocicleta 10%",2800},
{"Máscara de Soldador 10%",2600},
{"Capacete de Mineiro 5%",1800},

{"Colete 10%",6000},

},

["Рюкзаки"] = {
{"Mochila de SATURNO 20",8000},
{"Mochila de ASSALTO 40",10000},
{"Mochila de Montanha 60",12000},
{"Mochila do Comandante 80",14000},
{"Mochila de Explorador 100",16000},
{"Mochila do Colorado 120",18000},
{"Mochila Brasileira 140",20000},
--{"Mochila de Samurai 160",25000},
--{"Рюкзак ВОЕННЫЙ 180",35000},
--{"Рюкзак ФАРАОН 200",45000},

},
["Caixa de Ferramentas"] = {
{"Ôculos de Visão Noturna",1500},
{"Ôculos de Infravermelho",2000},
{"Mapa",521},
{"Caixa de Fósforo",20},
{"Relôgio",100},
{"GPS",1000},
{"Caixa de Ferramentas",2000},
{"GPS",3000,}
},



}

function rectMoney()
if YourMoneyText and YouSlots and YouItems then
guiSetText ( YourMoneyText, getElementData(getLocalPlayer(),"Dinheiro") or "N/A" )
guiSetFont (YourMoneyText, "default-bold-small" )
		local enginerSlots = getElementData(getLocalPlayer(),"progress.enginer") or 0
		local attackerSlots = getElementData(getLocalPlayer(),"progress.attacker") or 0
		
guiSetText ( YouSlots, exports.EpochZ.getPlayerCurrentSlots().."/"..getElementData(getLocalPlayer(),"MAX_Slots").." +"..math.floor((enginerSlots+attackerSlots)*0.2) )
guiSetFont (YouSlots, "default-bold-small" )
if STMITEM == "N/A" or STMITEM == nil or not STMITEM then
guiSetText ( YouItems, "N/A" )
guiSetFont (YouItems, "default-bold-small" )
else
guiSetText ( YouItems, getElementData(getLocalPlayer(),STMITEM) or "N/A" )
guiSetFont (YouItems, "default-bold-small" )
end

end
end
function isEventHandlerAdded( sEventName, pElementAttachedTo, func )
	if 
		type( sEventName ) == 'string' and 
		isElement( pElementAttachedTo ) and 
		type( func ) == 'function' 
	then
		local aAttachedFunctions = getEventHandlers( sEventName, pElementAttachedTo )
		if type( aAttachedFunctions ) == 'table' and #aAttachedFunctions > 0 then
			for i, v in ipairs( aAttachedFunctions ) do
				if v == func then
					return true
				end
			end
		end
	end
 
	return false
end

function PlayerInMarker(player,ped,teri,bloc)

local showingMoney = isEventHandlerAdded('onClientRender', root, rectMoney)
if not showingMoney then
 addEventHandler ( "onClientRender", root, rectMoney )
end 
 
if myWindow then 
guiSetVisible(myWindow, false)
end
local W,H = guiGetScreenSize()

showCursor(true)
myWindow = guiCreateWindow ( W/2-400, H/2-250, 750, 540, "Торговец", false )  
guiSetAlpha(myWindow,0.7)
guiWindowSetSizable ( myWindow, false )         



tabs = guiCreateTabPanel ( 10, 20, 750-10, 540-20, false, myWindow )
targ = guiCreateTab( "Торговля", tabs )
--sess = guiCreateTab( "Задания", tabs )
--info = guiCreateTab( "Информация", tabs )
aaa1= guiCreateGridList(10, 26, 250, 300, false, targ)
 aaa2= guiGridListAddColumn( aaa1, "Категория", 0.90 )

-- zadan= guiCreateGridList(10, 26, 200, 300, false, sess)
 --zadan1= guiGridListAddColumn( zadan, "Задания", 0.85 )
 
 scrollpane = guiCreateStaticImage(10,340,250,115, "scrollmenu_1.png", false, targ) 
 
  local YouMoney =guiCreateLabel(40, 10, 100, 20, "Ваши Dinheiro:", false, scrollpane)
guiSetFont (YouMoney, "default-bold-small" )
 YourMoneyText =guiCreateLabel(120, 10, 100, 20, "N/A", false, scrollpane)
 
local YouSlotsText =guiCreateLabel(40, 30, 250, 20, "Рюкзак:", false, scrollpane)
guiSetFont (YouSlotsText, "default-bold-small" )
 YouSlots =guiCreateLabel(90, 30, 100, 20, "N/A", false, scrollpane)
 
 local YouItemsText =guiCreateLabel(40, 50, 161, 20, "Предметов в рюкзаке:", false, scrollpane)
guiSetFont (YouItemsText, "default-bold-small" )
 YouItems =guiCreateLabel(178, 50, 100, 20, "N/A", false, scrollpane)
 
  


 
 	aaa3= guiCreateGridList(260, 26, 460, 300, false, targ)
 aaa4= guiGridListAddColumn( aaa3, "Предмет", 0.40 )
  -- aaa7= guiGridListAddColumn( aaa3, "Торговец/Вы", 0.20 )
 aaa5= guiGridListAddColumn( aaa3, "Цена пOKупки", 0.15 )
 aaa6= guiGridListAddColumn( aaa3, "Цена продажи", 0.15 )
 


if teri  then 
guiSetText ( myWindow, teri or " " )
		for i, item in ipairs(inventoryItems[teri]) do
			local row = guiGridListAddRow ( aaa1 )
			guiGridListSetItemText ( aaa1, row, aaa2, item[1] , false, false )	
		end
	end 




	
	
	addEventHandler( "onClientGUIClick", aaa1, 
	
	function( btn )
  if btn ~= 'left' then return false end
  local row, col = guiGridListGetSelectedItem( source )
  local stm = guiGridListGetItemText(aaa1,row, col)
  
 guiSetEnabled ( closeWin, false )
    guiSetEnabled ( BuyWin, false )
  
  
  
if stm then
  itemList =stm 
end
if stm or row then
guiGridListClear ( aaa3 )
end
local economist = getElementData(getLocalPlayer(),"progress.economist") or 0
local SKILL_CARTRADE = getElementData(getLocalPlayer(),"SKILL_CARTRADE") or 0

 for i, item in ipairs(inventoryItems[itemList]) do
		local row = guiGridListAddRow ( aaa3 )
			guiGridListSetItemText ( aaa3, row, aaa4, item[1] , false, false )
			 if teri ~= "Торговец: транспорт"  and  getElementData(getLocalPlayer(),item[1]) ~= true and  getElementData(getLocalPlayer(),item[1]) ~= false then
			 if getElementData(getLocalPlayer(),item[1]) >= 1  then
			 guiGridListSetItemColor  (  aaa3, row, aaa4, 0, 255, 0   )
			end
			
			end
			if teri == "Торговец: транспорт" then
			guiGridListSetItemText ( aaa3, row, aaa5, math.ceil(item[2]-(item[2]/100*(SKILL_CARTRADE*5))) , false, false )
			else
			guiGridListSetItemText ( aaa3, row, aaa5, item[2] , false, false )
			end
			if teri ~= "Торговец: транспорт"  then
			if teri ~= "Барыга" then
			guiGridListSetItemText ( aaa3, row, aaa6, math.ceil (item[2]/2+((item[2]/2)*(economist*0.5)/100)) , false, false )
			else
			guiGridListSetItemText ( aaa3, row, aaa6, math.ceil(math.ceil (item[2]/2+((item[2]/2)*(economist*0.5)/100))/2) , false, false )
			end
			
			end
	end
	
	
end, false )
	

	

 STMITEM = "N/A"
	addEventHandler( "onClientGUIClick", aaa3, 
	
	function( btn228 )
  if btn228 ~= 'left' then return false end
  local row228, col228 = guiGridListGetSelectedItem( source )
  local stm228 = guiGridListGetItemText(aaa3,row228, col228)
 STMITEM = stm228
   --guiSetEnabled ( closeWin, true )
    guiSetEnabled ( BuyWin, true )
if teri == "Торговец: транспорт"   or itemList=="Мото транспорт(черный рынOK)" or itemList=="Легковой транспорт(черный рынOK)" or itemList=="Грузовой транспорт(черный рынOK)" or  itemList =="Воздушный транспорт(черный рынOK)" then 

  guiSetEnabled ( closeWin, false )

  else
  guiSetEnabled ( closeWin, true )
  end
 
if stm228 == "" or stm228 == false then
STMITEM = "N/A"
end
 
  end, false )




 BuyWin = guiCreateButton( 350, 340, 280, 30, "Купить",false,targ)
 addEventHandler ( "onClientGUIClick", BuyWin,function() 
   local row, col = guiGridListGetSelectedItem( aaa3 )
  local stm = guiGridListGetItemText(aaa3,row, col)
   triggerServerEvent ("PlayerBuy", getLocalPlayer(), row,col,stm,itemList,getLocalPlayer(),exports.EpochZ.getPlayerCurrentSlots(),ped,inventoryItems[itemList],teri,bloc)
 end,false)
 
 closeWin = guiCreateButton( 350, 420, 280, 30, "Выход",false,targ)
 
 addEventHandler ( "onClientGUIClick", closeWin,function() 
 guiSetVisible(myWindow, false)
 showCursor(false)
 local showingMoney = isEventHandlerAdded('onClientRender', root, rectMoney)
 if showingMoney then
removeEventHandler("onClientRender", root, rectMoney) 
end
 end,false)
 
 closeWin = guiCreateButton( 350, 380, 280, 30, "Vender",false,targ)
 
 addEventHandler ( "onClientGUIClick", closeWin,function() 
    local row, col = guiGridListGetSelectedItem( aaa3 )
  local stm = guiGridListGetItemText(aaa3,row, col)
  local clot1 = getElementData(getLocalPlayer(),"clotType_1")
  local clot2 = getElementData(getLocalPlayer(),"clotType_2")
  if clot1 and clot1~=0 and clot1==stm  then
  local clot1IN = getElementData(getLocalPlayer(),clot1)
  if clot1IN<=1 then outputChatBox("Não posso vender uma coisa utilizável") return end
  end
  if clot2 and clot1~=0 and clot2==stm then
  local clot2IN = getElementData(getLocalPlayer(),clot2)
  if clot2IN<=1 then outputChatBox("Não posso vender uma coisa utilizável") return end
  end
  
  if getElementData(getLocalPlayer(),stm) or 0 -1 <=0 then
  guiGridListSetItemColor  (  aaa3, row, aaa4, 255, 255, 255   )
  end
 triggerServerEvent ("PlayerSell", getLocalPlayer(), row,col,stm,itemList,getLocalPlayer(),exports.EpochZ.getPlayerCurrentSlots(),ped,inventoryItems[itemList],teri)
 end,false)
    guiSetEnabled ( closeWin, false )
    guiSetEnabled ( BuyWin, false )
end




addEvent( "PlayerInMarker", true )
addEventHandler( "PlayerInMarker", getLocalPlayer(), PlayerInMarker )









function closeTradeWin()
 guiSetVisible(myWindow, false)
 showCursor(false)
  local showingMoney = isEventHandlerAdded('onClientRender', root, rectMoney)
 if showingMoney then
removeEventHandler("onClientRender", root, rectMoney) 
end
 end
addEvent( "closeTradeWin", true )
addEventHandler( "closeTradeWin", getLocalPlayer(), closeTradeWin )















--createRadarArea ( 1151.2697753906,-1420, 140, 140, 0, 255, 0, 120 )
--bigLS = createColCuboid (1151.2697753906,-1420,0, 140, 150, 140 ) -- BigLS



createRadarArea (-260.85906982422,-1582.1025390625, 130, 140, 0, 255, 0, 120 )
smallLS = createColCuboid (-260.85906982422,-1582.1025390625,0, 130, 150, 11 ) -- SmallLS



createRadarArea ( 1573.7313232422,1467.6999511719, 140, 170, 0, 255, 0, 120 )
bigLV = createColCuboid (1573.7313232422,1467.6999511719,0, 140, 170, 140 ) -- BigLV




createRadarArea ( 744.81085205078,2297.7470703125, 80, 100, 0, 255, 0, 120 )
smallLV = createColCuboid (744.81085205078,2297.7470703125,0, 80, 100, 140 ) -- SmallLV


createRadarArea ( -1587.5122070313,-471.70648193359, 160, 170, 0, 255, 0, 120 ) -- sf
bigSF = createColCuboid (-1587.5122070313,-471.70648193359,0, 160, 170, 140 ) -- BigSF



createRadarArea ( -2486.0737304688,-710.16931152344, 100, 130, 0, 255, 0, 120 ) -- sf
smallSF = createColCuboid (-2486.0737304688,-710.16931152344,120, 100, 130, 140 ) -- SmallSF


createRadarArea ( 591.00091552734,-680, 300,270, 0, 255, 0, 120 ) -- sf
bigZZ = createColCuboid (591.00091552734,-680,10.218955993652,300,270,30 ) -- BigLS









safecol4 = createColCuboid (1984.6658935547,2750.3813476563,-4, 35, 80, 13 ) -- blackTraderBase
safecol5 = createColCuboid (1591.2078857422,-1925.2379150391,5.7610883712769, 35, 20, 5 ) -- blackTraderBase
safecol6 = createColCuboid (-2055.7231445313,885.1513671875,60, 12, 10, 5 ) -- blackTraderBase
safecol7 = createColCuboid (-128.49359130859,2831.8471679688,62.120788574219, 20, 25, 10 ) -- blackTraderBase






local globaltimer = false

function enterZone(theCol)
if theCol ==bigZZ  or theCol== bigSF or theCol == bigLV or theCol ==smallLS  or theCol ==smallLV  or theCol ==smallSF or theCol ==safecol4 or theCol ==safecol5 or theCol ==safecol6 or theCol ==safecol7  then 
if getElementType ( source ) == "player" then
local antirelogStarted = getElementData(getLocalPlayer(),"antirelogStarted") or false
if antirelogStarted then
triggerServerEvent("removeAntirelog",getLocalPlayer(),getLocalPlayer())
end
if isTimer(globaltimer) then
killTimer(globaltimer)
globaltimer = nil 

end

toggleControl ( "fire", false )
toggleControl ("action", false )
--toggleControl ("previous_weapon", false )

toggleControl ("aim_weapon", false )
outputChatBox("Você entrou na zona verde!")
setElementData(getLocalPlayer(),"InGreenZone",true)


elseif getElementType ( source ) == "vehicle" then
--setElementData(source,"CarInGreenZone",true)
end

end
end
addEventHandler( "onClientElementColShapeHit", getLocalPlayer() , enterZone )


function leaveZone(theCol)
if theCol ==bigZZ or theCol== bigSF or theCol == bigLV or theCol ==smallLS  or theCol ==smallLV  or theCol ==smallSF or theCol ==safecol4 or theCol ==safecol5 or theCol ==safecol6 or theCol ==safecol7  then 
if getElementType ( source ) == "player" then

if not isTimer(globaltimer) then 
addEventHandler ( "onClientRender", root, updateZZtimer )
globaltimer = setTimer(
function()
toggleControl ( "fire", true )
toggleControl ("action", true )
--toggleControl ("previous_weapon", true )
toggleControl ("aim_weapon", true )
setElementData(getLocalPlayer(),"InGreenZone",false) 
outputChatBox("Você está fora da zona verde!")
removeEventHandler("onClientRender", root, updateZZtimer) 

end,15000,1)

end

elseif getElementType ( source ) == "vehicle" then
--setElementData(source,"CarInGreenZone",false)


end




end
end

addEventHandler( "onClientElementColShapeLeave", getLocalPlayer() , leaveZone )


local screenWidth, screenHeight = guiGetScreenSize ( )
function updateZZtimer ()
if globaltimer then
	local ms, mm, ss = getTimerDetails ( globaltimer )
	local textZZ = "Área segura:"..math.ceil(ms/1000).." s"
	local textZZW = dxGetTextWidth ( textZZ, 1.4, "sans" )
	  dxDrawText ( textZZ, (screenWidth/2)-(textZZW/2),  80, screenWidth, screenHeight, tocolor ( 0,200,0, 200 ), 1.4, "sans" )
else
removeEventHandler("onClientRender", root, updateZZtimer) 
	  end
	  end



function onClientPlayerWeaponFireFunc(weapon, ammo, ammoInClip, hitX, hitY, hitZ, hitElement)
local green= getElementData(getLocalPlayer(),"InGreenZone",false)
if green and hitElement then
triggerServerEvent("kilLDayZPlayer",getLocalPlayer())
outputChatBox("É proibido atirar na zona verde!")
end
end

addEventHandler("onClientPlayerWeaponFire", getLocalPlayer(), onClientPlayerWeaponFireFunc)



--[[
function handleVehicleDamage(attacker, weapon, loss, x, y, z, tyre)
    if  getElementData(source,"CarInGreenZone") then
        cancelEvent()
		if getElementType(attacker) == getLocalPlayer() then 
		if not getElementData(attacker,"isDead") == true then
				triggerServerEvent("kilLDayZPlayer",attacker)
				setElementData(attacker,"isDead",true) --server
				end
		end
    end
end
addEventHandler("onClientVehicleDamage", root, handleVehicleDamage)

]]









 






function MarkerHitf(hit) 
if hit == getLocalPlayer() then
local pedName = getElementData(getElementData(source,"trader"),"pedName")
local pedLocation = getElementData(getElementData(source,"trader"),"traderLocation")
 PlayerInMarker(getLocalPlayer(),pedTrader,pedName,pedLocation) -- лв
end
 end



	

	

	pedTrader7 = createPed ( 258, -204.74485778809,-1537.9691162109,6.9089779853821,0,false) 
	myMarker7 = createMarker ( -204.74485778809,-1537.9691162109,6.9089779853821, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker7, MarkerHitf)
	setPedAnimation (pedTrader7,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker7,"trader",pedTrader7,false)
	setElementData(pedTrader7,"trader",myMarker7,false)
	setElementData(pedTrader7,"pedName","Торговец: одежда")
	setElementFrozen  ( pedTrader7, true )
	
	
	
	
	
		pedTrader8 = createPed ( 277, -197.73374938965,-1529.5072021484,6.9884920120239,0,false) 
	myMarker8 = createMarker ( -197.73374938965,-1529.5072021484,6.9884920120239, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker8, MarkerHitf)
	--setPedAnimation (pedTrader8,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker8,"trader",pedTrader8,false)
	setElementData(pedTrader8,"trader",myMarker8,false)
	setElementData(pedTrader8,"pedName","Торговец: оружие")
	setElementFrozen  ( pedTrader8, true )

	
			pedTrader9 = createPed ( 278, -193.93229675293,-1521.5017089844,7.5371336936951,100,false) 
	myMarker9 = createMarker ( -193.93229675293,-1521.5017089844,7.5371336936951, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker9, MarkerHitf)
	--setPedAnimation (pedTrader9,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker9,"trader",pedTrader9,false)
	setElementData(pedTrader9,"trader",myMarker9,false)
	setElementData(pedTrader9,"pedName","Торговец: патроны")
	setElementFrozen  ( pedTrader9, true )
	

	pedTrader16 = createPed ( 287, 775.48376464844,2352.5837402344,12.848894119263,-140,false) 
	myMarker16= createMarker ( 775.48376464844,2352.5837402344,12.848894119263, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker16, MarkerHitf)
--	setPedAnimation (pedTrader15,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker16,"trader",pedTrader16,false)
	setElementData(pedTrader16,"trader",myMarker16,false)
	setElementData(pedTrader16,"pedName","Торговец: разное")
	setElementFrozen  ( pedTrader16, true )
	
	
	
	
	pedTrader17 = createPed ( 277, 781.63757324219,2353.6352539063,12.658178329468,-180,false) 
	myMarker17= createMarker ( 781.63757324219,2353.6352539063,12.658178329468, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker17, MarkerHitf)
	setPedAnimation (pedTrader17,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker17,"trader",pedTrader17,false)
	setElementData(pedTrader17,"trader",myMarker17,false)
	setElementData(pedTrader17,"pedName","Торговец: оружие")
	setElementFrozen  ( pedTrader17, true )
	
	
	pedTrader18 = createPed ( 278, 775.29602050781,2334.9167480469,12.097772598267,0,false) 
	myMarker18= createMarker ( 775.29602050781,2334.9167480469,12.097772598267, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker18, MarkerHitf)
	--setPedAnimation (pedTrader18,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker18,"trader",pedTrader18,false)
	setElementData(pedTrader18,"trader",myMarker18,false)
	setElementData(pedTrader18,"pedName","Торговец: патроны")
	setElementFrozen  ( pedTrader18, true )

	pedTrader25 = createPed ( 258, -2434.7971191406,-654.9453125,133.11114501953,00,false) 
	myMarker25= createMarker ( -2434.7971191406,-654.9453125,133.11114501953, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker25, MarkerHitf)
	--setPedAnimation (pedTrader23,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker25,"trader",pedTrader25,false)
	setElementData(pedTrader25,"trader",myMarker25,false)
	setElementData(pedTrader25,"pedName","Торговец: одежда")
	setElementFrozen  ( pedTrader25, true )
	
	
	pedTrader26 = createPed ( 259, -2427.5549316406,-648.07666015625,133.03733825684,90,false) 
	myMarker26= createMarker ( -2427.5549316406,-648.07666015625,133.03733825684, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker26, MarkerHitf)
	setPedAnimation (pedTrader26,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker26,"trader",pedTrader26,false)
	setElementData(pedTrader26,"trader",myMarker26,false)
	setElementData(pedTrader26,"pedName","Торговец: Comidas & Bebidas & Mel")
	setElementFrozen  ( pedTrader26, true )
	
	pedTrader27 = createPed ( 287, -2431.5227050781,-644.47119140625,132.99859619141,90,false) 
	myMarker27= createMarker ( -2431.5227050781,-644.47119140625,132.99859619141, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker27, MarkerHitf)
	--setPedAnimation (pedTrader27,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker27,"trader",pedTrader27,false)
	setElementData(pedTrader27,"trader",myMarker27,false)
	setElementData(pedTrader27,"pedName","Торговец: разное")
	setElementFrozen  ( pedTrader27, true )
	
	pedTrader28 = createPed ( 277, -2438.8159179688,-643.24932861328,132.98547363281,-90,false) 
	myMarker28= createMarker ( -2438.8159179688,-643.24932861328,132.98547363281, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker28, MarkerHitf)
	--setPedAnimation (pedTrader27,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker28,"trader",pedTrader28,false)
	setElementData(pedTrader28,"trader",myMarker28,false)
	setElementData(pedTrader28,"pedName","Торговец: оружие")
	setElementFrozen  ( pedTrader28, true )
	
	pedTrader29 = createPed ( 255, 658.96008, -576.11548, 16.33594,90,false) 
	myMarker29= createMarker ( 658.96008, -576.11548, 16.33594, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker29, MarkerHitf)
	--setPedAnimation (pedTrader27,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker29,"trader",pedTrader29,false)
	setElementData(pedTrader29,"trader",myMarker29,false)
	setElementData(pedTrader29,"pedName","Торговец: транспорт")
	setElementFrozen  ( pedTrader29, true )

	

	pedTrader1 = createPed ( 278, 613.08813476563,-587.88153076172,17.2265625,-120,false) 
	myMarker1= createMarker ( 613.08813476563,-587.88153076172,17.2265625, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker1, MarkerHitf)
	--setPedAnimation (pedTrader27,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker1,"trader",pedTrader1,false)
	setElementData(pedTrader1,"trader",myMarker1,false)
	setElementData(pedTrader1,"pedName","Торговец: патроны")
	setElementFrozen  ( pedTrader1, true )

	pedTrader2 = createPed ( 258, 613.23278808594,-597.54473876953,17.233013153076,180,false) 
	myMarker2= createMarker ( 613.23278808594,-597.54473876953,17.233013153076, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker2, MarkerHitf)
	--setPedAnimation (pedTrader23,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker2,"trader",pedTrader2,false)
	setElementData(pedTrader2,"trader",myMarker2,false)
	setElementData(pedTrader2,"pedName","Торговец: одежда")
	setElementFrozen  ( pedTrader2, true )
	
	pedTrader3 = createPed ( 287, 659.53649902344,-610.48443603516,16.3359375,20,false) 
	myMarker3= createMarker ( 659.53649902344,-610.48443603516,16.3359375, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker3, MarkerHitf)
	--setPedAnimation (pedTrader27,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker3,"trader",pedTrader3,false)
	setElementData(pedTrader3,"trader",myMarker3,false)
	setElementData(pedTrader3,"pedName","Торговец: разное")
	setElementFrozen  ( pedTrader3, true )
	
	pedTrader4 = createPed ( 259, 671.39202880859,-617.23626708984,16.339584350586,-90,false) 
	myMarker4= createMarker ( 671.39202880859,-617.23626708984,16.339584350586, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker4, MarkerHitf)
	--setPedAnimation (pedTrader4,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker4,"trader",pedTrader4,false)
	setElementData(pedTrader4,"trader",myMarker4,false)
	setElementData(pedTrader4,"pedName","Торговец: Comidas & Bebidas & Mel")
	setElementFrozen  ( pedTrader4, true )
	
	pedTrader5 = createPed ( 277, 668.37225341797,-586.22241210938,16.3359375,190,false) 
	myMarker5= createMarker ( 668.37225341797,-586.22241210938,16.3359375, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker5, MarkerHitf)
	--setPedAnimation (pedTrader27,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker5,"trader",pedTrader5,false)
	setElementData(pedTrader5,"trader",myMarker5,false)
	setElementData(pedTrader5,"pedName","Торговец: оружие")
	setElementFrozen  ( pedTrader5, true )
	
	-------------------------------------------------------BIGlv
	pedTrader5 = createPed ( 277, 1640.7705078125,1530.677734375,10.787042617798,0,false) 
	myMarker5= createMarker ( 1640.7705078125,1530.677734375,10.787042617798, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker5, MarkerHitf)
	--setPedAnimation (pedTrader27,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker5,"trader",pedTrader5,false)
	setElementData(pedTrader5,"trader",myMarker5,false)
	setElementData(pedTrader5,"pedName","Торговец: оружие")
	setElementFrozen  ( pedTrader5, true )
	
	pedTrader29 = createPed ( 259, 1628.7967529297,1550.5463867188,10.805704116821,240,false) 
	myMarker29= createMarker ( 1628.7967529297,1550.5463867188,10.805704116821, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker29, MarkerHitf)
	--setPedAnimation (pedTrader27,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker29,"trader",pedTrader29,false)
	setElementData(pedTrader29,"trader",myMarker29,false)
	setElementData(pedTrader29,"pedName","Торговец: Comidas & Bebidas & Mel")
	setElementFrozen  ( pedTrader29, true )
	
	pedTrader3 = createPed ( 287, 1621.5806884766,1534.5533447266,10.80073261261,-40,false) 
	myMarker3= createMarker ( 1621.5806884766,1534.5533447266,10.80073261261, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker3, MarkerHitf)
	--setPedAnimation (pedTrader27,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker3,"trader",pedTrader3,false)
	setElementData(pedTrader3,"trader",myMarker3,false)
	setElementData(pedTrader3,"pedName","Торговец: разное")
	setElementFrozen  ( pedTrader3, true )
	
	
	pedTrader2 = createPed ( 258, 1649.6311035156,1537.0456542969,10.780550956726,90,false) 
	myMarker2= createMarker ( 1649.6311035156,1537.0456542969,10.780550956726, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker2, MarkerHitf)
	--setPedAnimation (pedTrader23,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker2,"trader",pedTrader2,false)
	setElementData(pedTrader2,"trader",myMarker2,false)
	setElementData(pedTrader2,"pedName","Торговец: одежда")
	setElementFrozen  ( pedTrader2, true )
	
	pedTrader18 = createPed ( 278, 1615.7293701172,1547.7244873047,10.809983253479,210,false) 
	myMarker18= createMarker ( 1615.7293701172,1547.7244873047,10.809983253479, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker18, MarkerHitf)
	--setPedAnimation (pedTrader18,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker18,"trader",pedTrader18,false)
	setElementData(pedTrader18,"trader",myMarker18,false)
	setElementData(pedTrader18,"pedName","Торговец: патроны")
	setElementFrozen  ( pedTrader18, true ) 
	
----------------------------------------------------------------- BIGsf



pedTrader18 = createPed ( 278, -1477.8364257813,-402.84918212891,6.875	,50,false) 
	myMarker18= createMarker ( -1477.8364257813,-402.84918212891,6.875	, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker18, MarkerHitf)
	--setPedAnimation (pedTrader18,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker18,"trader",pedTrader18,false)
	setElementData(pedTrader18,"trader",myMarker18,false)
	setElementData(pedTrader18,"pedName","Торговец: патроны")
	setElementFrozen  ( pedTrader18, true ) 
	
	

	pedTrader2 = createPed ( 258, -1466.056640625,-404.67056274414,6.875,50,false) 
	myMarker2= createMarker ( -1466.056640625,-404.67056274414,6.875, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker2, MarkerHitf)
	setPedAnimation (pedTrader2,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker2,"trader",pedTrader2,false)
	setElementData(pedTrader2,"trader",myMarker2,false)
	setElementData(pedTrader2,"pedName","Торговец: одежда")
	setElementFrozen  ( pedTrader2, true )
	

	pedTrader3 = createPed ( 287, -1530.2703857422,-346.74179077148,6.8846797943115,-190,false) 
	myMarker3= createMarker ( -1530.2703857422,-346.74179077148,6.8846797943115, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker3, MarkerHitf)
	--setPedAnimation (pedTrader27,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker3,"trader",pedTrader3,false)
	setElementData(pedTrader3,"trader",myMarker3,false)
	setElementData(pedTrader3,"pedName","Торговец: разное")
	setElementFrozen  ( pedTrader3, true )
	

pedTrader29 = createPed ( 259, -1538.7884521484,-368.83847045898,6.875	,240,false) 
	myMarker29= createMarker ( -1538.7884521484,-368.83847045898,6.875	, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker29, MarkerHitf)
	--setPedAnimation (pedTrader27,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker29,"trader",pedTrader29,false)
	setElementData(pedTrader29,"trader",myMarker29,false)
	setElementData(pedTrader29,"pedName","Торговец: Comidas & Bebidas & Mel")
	setElementFrozen  ( pedTrader29, true )
	

	pedTrader5 = createPed ( 277, -1512.1785888672,-368.98831176758,6.9531631469727,140,false) 
	myMarker5= createMarker ( -1512.1785888672,-368.98831176758,6.9531631469727, "corona", 1.5, 0, 0, 0, 170 )
	addEventHandler( "onClientMarkerHit", myMarker5, MarkerHitf)
	--setPedAnimation (pedTrader27,"BEACH","ParkSit_M_loop",nil,true,false,false,false)
	setElementData(myMarker5,"trader",pedTrader5,false)
	setElementData(pedTrader5,"trader",myMarker5,false)
	setElementData(pedTrader5,"pedName","Торговец: оружие")
	setElementFrozen  ( pedTrader5, true )
	
	
function handleVehicleDamage(attacker, weapon, loss, x, y, z, tyre)
local carInZZ = getElementData(source,"CarInZZ") or false
if carInZZ  then
cancelEvent()
end
end
addEventHandler("onClientVehicleDamage", root, handleVehicleDamage)




